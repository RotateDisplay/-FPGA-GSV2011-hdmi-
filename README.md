# -FPGA-GSV2011-hdmi-
简介：这是一个hdmi电视流光溢彩氛围灯控制器，用于电视、电脑hdmi同屏灯带显示控制。 该产品具备一个hdmi输入和一个hdmi输出接口，能够检测到视频边缘的颜色，让灯光成为电视机屏幕的延伸。 
一、产品简介

这是一个hdmi电视流光溢彩氛围灯控制器，用于电视、电脑hdmi同屏灯带显示控制。

该产品具备一个hdmi输入和一个hdmi输出接口，能够检测到视频边缘的颜色，驱动电视周边的LED灯带，让灯光成为电视机屏幕的延伸。

目前市面上已有的解决方案对比如下：

PC软件版本，价格便宜，但是软件操作复杂，需要时时刻刻对屏幕录制，客户担心隐私安全。mac电脑的以及部分win电脑上面的兼容性问题。

摄像头版本虽然可以使用网络电视，价格便宜，但是依然有初次安装难度大需要在app里面标定屏幕4边，延迟大，颜色不精准，受外界光线干扰大。

hdmi方案具有不受外界光线干扰，初次安装简单，客户教育成本低，无需app或者PC软件调试。但是必须要使用电视的hdmi输入端口使用，网络电视不支持。

 
二、应用场景

当您沉浸在高清晰度（HD）视频的世界中时，HDMI视频氛围灯能够带给您全新的视觉体验。无论是观看电影、玩游戏还是欣赏音乐，HDMI视频氛围灯将通过色彩和光线的交融，为您创造出令人心旷神怡的环境。通过连接您的HDMI设备（如电视、投影仪或游戏机）和专门设计的氛围灯，您可以在观影或游戏过程中营造出令人陶醉的视听氛围。HDMI视频氛围灯会根据屏幕上的影像内容和颜色，智能地调整灯光的色彩、亮度和动态效果，与屏幕上的画面相辅相成，营造出更加身临其境的感觉。想象一下，当您观看惊险刺激的电影时，HDMI视频氛围灯会随着画面中的情节转变而调整光线的颜色和亮度，将您带入电影的情境之中。或者，在玩游戏时，灯光会根据游戏场景的变化而变化，增强您的游戏体验。不仅如此，HDMI视频氛围灯还可以与音乐同步，根据音乐的节奏和旋律，以炫彩的灯光效果呼应音乐的律动，让您的音乐之旅更加动感与愉悦。HDMI视频氛围灯为您提供了一种全新的沉浸式视听体验，将您带入影像和音乐的奇妙世界。无论您是电影爱好者、游戏迷还是音乐发烧友，HDMI视频氛围灯都能为您带来与众不同的感官享受。让灯光与影像、音乐融为一体，创造出令人难以忘怀的视听盛宴，尽情享受HDMI视频氛围灯带来的无限乐趣吧！

 
三、产品概述

本方案采用全部国产芯片制作而成，以基石GSV2011 hdmi收发器 + 高云的小蜜蜂的fpga GW1N-UV2LQ100XC6/I5 为整个系统的核心处理单元，占用资源小，用2K的逻辑资源完成了数字图像处理。具体的信号处理流程如下：

从电脑或者机顶盒的hdmi信号经过gsv2011芯片输入之后，其中一路信号通过hdmi环出到显示器或者电视机，另外一路信号经过gsv2011解码之后，变为TTL信号格式，24bit RGB888直接进入到fpga做图像处理，这样系统是最为简洁。stm32 mcu 用于配置gsv2011芯片的iic通道，fpga收到的RGB信号按照灯带IC个数划分的格子做分区处理，求出每个区域格子RGB的平均亮度，最后通过ws2811控制器驱动幻彩灯带。ms51 单片机用于配置fpga并且和fpga通讯，预留了wifi模块/2.4G模块可以和外部通讯接口，为后续升级功能使用。
系统框图如下：

 ![ͼƬ(1)](https://github.com/RotateDisplay/-FPGA-GSV2011-hdmi-/assets/57975357/083f9ed2-80df-47a1-8eb1-76d6a2f5df30)

四、产品参数
![ͼƬ(2)](https://github.com/RotateDisplay/-FPGA-GSV2011-hdmi-/assets/57975357/bc7f85a2-5691-4d31-a4eb-dbfba2beeeab)

![ͼƬ(3)](https://github.com/RotateDisplay/-FPGA-GSV2011-hdmi-/assets/57975357/1b697bea-a70b-439f-94c6-8eb6eafb2ad5)  

<img width="566" alt="333" src="https://github.com/RotateDisplay/-FPGA-GSV2011-hdmi-/assets/57975357/a4c2c450-db85-404d-9ca9-4e2ff279267a"> 

产品特性

l 方案高性价比

l 采用FPGA实时视频处理，灯光延迟极低，捕获颜色准确。更加适合电竞等低延迟场合。

l 支持市面上常规5-24V幻彩灯带+灯柱同时控制；

l 支持无线桥接其他灯具，实现整个房间灯光的同步控制；

l 支持电视同步自动开关机

l 支持HDR 、杜比视界

l 支持HDMI2.0b的协议，最高可支持18G_4K60fps,YCbCr 4:4:4

l 支持涂鸦app控制

l 安装简单、免调试通电即可正常工作

l 支持google alexa语音控制

l 电脑显示器、120寸电视均可安装

l 沉浸体验：视频模式、音乐模式、色盘模式、内置多个场景模式、测试模式

 

 

 
五、使用说明

1.    安装电视背面的LED灯带1，必须从电视背面的左下角开始!!

2.    将LED灯带电缆2连接到同步盒的“LED Strip”端口。

3.    用HDMI线3连接同步盒和电视的hdmi接口。

4.    用HDMI线4连接同步盒和机顶盒或游戏机。

5.    连接电源适配器5，给所有设备上电。默认设置上电即可正常工作。

 

灯带接线图定义： 为1路ws2811信号。
![d7818d3b11ca4d7c42c981d1703f2c0(1)](https://github.com/RotateDisplay/-FPGA-GSV2011-hdmi-/assets/57975357/37d25d09-13d4-4481-91b9-15163d56b9b8)

灯柱接线图定义：lightbar 为2路ws2811
![9a9503f4faeec112d3ed14aa7fbddf7](https://github.com/RotateDisplay/-FPGA-GSV2011-hdmi-/assets/57975357/34c15c4b-51cc-45ba-bc79-3df4baa4719e) 

 ![ͼƬ(4)](https://github.com/RotateDisplay/-FPGA-GSV2011-hdmi-/assets/57975357/65d856a3-057f-44dc-8a91-22340a1f9351) 


说明：该固件为3边灯带版本，注意最底下那条灯带不贴；必须从右下角逆时针贴一圈（正面看电视机）；

由于控制盒必须要有hdmi信号源的输入，因此带有网络电视的电视机是不能同步电视内部的节目使用，必须要外接HDMI信号源。

六、备注

电路板生产注意事项：

1.PCB为4层板，需要注意；

2.由于有bga芯片，建议表面处理为沉金，避免喷锡板高低不平；

3.PCB需要做阻抗控制，请见gerber文件的说明；

4.此控制器既可以用于电视机（12V灯带），也可以用于电脑（5V灯带），也可以用于投影（24V灯带）。一定要用幻彩带IC的灯带，不用RGBCW灯带

5.灯带接线：灯带需要用typeC转接线引出，信号线为CC脚； 灯柱需要用typeC转接线引出，信号线为D+ D-脚 ，2个独立通道。请查看原理图。

6.电源说明：控制器不存在电压转换的功能，你用什么电压的灯带和灯柱，就必须用什么电压的电源适配器。

7.hdmi电缆一定要买2.0规格的 。

8.microusb 为后续同步电视开关机功能使用的，本次没有使用；

9.附件包含有说明书、位号图、部分元器件购买参考链接，还有固件+烧录说明文件(使用amo的脱机烧录器，加载hex文件即可烧录)

 

成本构成：

GSV2011/1011芯片：30/25左右 hdmi2.0 /hdmi1.4 可以按照需求贴片；

高云fpga芯片：13左右

APM32F030C8T6：3元左右

MS51FC0AE：2.5左右

PCB：批量5元

-------------------------------------------

全套总成本约：￥60 元（含PCB、SMT）hdmi1.4版本

灯带、hdmi线缆、电源（2A）其他另算 如果按照显示器用的裸板2812灯带全套不超过未税100元。

 

推荐使用SMT贴装，其余DC座子 按键 麦克风手工焊接。

七、测试视频


https://github.com/RotateDisplay/-FPGA-GSV2011-hdmi-/assets/57975357/e9334685-8972-4068-8dcd-b8c392d23bb0



参考附件 
 
![套装图片](https://github.com/RotateDisplay/-FPGA-GSV2011-hdmi-/assets/57975357/2263540b-9c2b-4af0-900d-c591df0b6e74)

 
八. 最近更新：
